# QQ开放平台回调地址配置详细步骤

## 当前状态

从截图中看到：
- **网站回调域**：`https://app7626.acapp.acwing.com.cn/qq/callback` （这是旧的）
- 需要添加新的回调地址：`https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq`

## 添加回调地址步骤

### 方法1：修改"网站回调域"（如果有修改按钮）

1. **点击"修改"按钮**
   - 在"平台信息"页面，找到"网站回调域"右侧的"修改"按钮
   - 点击"修改"按钮

2. **更新回调地址**
   - 在输入框中，将回调地址修改为：
     ```
     https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq
     ```
   - **注意**：
     - 不要添加末尾斜杠 `/`
     - 必须使用 `https://` 协议
     - 域名必须完全匹配

3. **保存**
   - 点击"保存"或"提交"按钮
   - 等待审核通过（如果是首次修改）

### 方法2：添加多个回调地址（推荐）

如果QQ开放平台支持添加多个回调地址：

1. **查找"授权回调域"或"回调地址列表"**
   - 在"应用详情"页面查找
   - 可能在不同的标签页中（如"开发信息"、"接口权限"等）

2. **添加新回调地址**
   - 点击"添加回调地址"按钮
   - 输入：
     ```
     https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq
     ```
   - 点击"保存"

3. **保留旧回调地址**
   - 如果还有其他地方使用 `/qq/callback`，不要删除旧的回调地址
   - 可以同时配置多个回调地址

### 方法3：通过"应用管理"修改

1. **进入应用详情**
   - 在"应用管理"页面，点击你的应用
   - 进入应用详情页面

2. **查找回调地址配置**
   - 查找"基本信息"或"开发配置"相关标签页
   - 查找"授权回调域"、"回调地址"、"redirect_uri"等相关字段

3. **添加或修改**
   - 如果只有一个输入框，可能需要替换或添加多个地址
   - 如果支持多行或多地址，添加新地址：
     ```
     https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq
     ```

## 需要配置的回调地址

### 当前代码中使用的回调地址：

1. **OAuth 登录流程**（必须添加）：
   ```
   https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq
   ```

2. **普通QQ登录**（如果还在使用）：
   ```
   https://app7626.acapp.acwing.com.cn/qq/callback
   ```

### 建议配置

如果QQ开放平台支持多个回调地址，同时添加：
- `https://app7626.acapp.acwing.com.cn/oauth/login/callback/qq` （新，用于OAuth）
- `https://app7626.acapp.acwing.com.cn/qq/callback` （旧，如果还在使用）

## 重要注意事项

1. **格式要求严格**
   - 不能有末尾斜杠：`/oauth/login/callback/qq` ✅，`/oauth/login/callback/qq/` ❌
   - 必须使用HTTPS
   - 域名必须完全匹配

2. **生效时间**
   - 修改后可能需要等待几分钟生效
   - 如果是首次配置或修改，可能需要提交审核

3. **审核状态**
   - 检查应用审核状态
   - 确保应用已通过审核且未过期

4. **测试**
   - 配置完成后，清除浏览器缓存
   - 重新测试QQ登录流程

## 如果找不到配置入口

1. **查看帮助文档**
   - QQ开放平台应该有帮助文档
   - 搜索"回调地址"、"redirect_uri"相关说明

2. **联系QQ开放平台客服**
   - 如果找不到配置入口，可以联系客服咨询
   - 说明需要添加新的回调地址用于OAuth登录

3. **检查应用类型**
   - 确认应用类型是否正确（网站应用）
   - 某些应用类型可能有不同的配置方式

## 验证配置

配置完成后，测试步骤：

1. **清除浏览器缓存**
   - 按 `Ctrl+Shift+Delete` 清除缓存

2. **测试OAuth登录**
   - 访问OAuth授权页面
   - 点击"QQ登录"
   - 应该能正常跳转到QQ授权页面
   - 授权后应该能正常回调到 `/oauth/login/callback/qq`

3. **查看日志**
   - 如果还有问题，查看Django日志
   - 检查是否有回调地址相关的错误


