# ğŸ¨ Django Admin ç®¡ç†åå°ä½¿ç”¨æŒ‡å—

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

Ralendar ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¯è§†åŒ–ç®¡ç†åå°ï¼Œå¯ä»¥è½»æ¾ç®¡ç†æ‰€æœ‰æ•°æ®ï¼

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- âœ… **èŠ‚å‡æ—¥ç®¡ç†**ï¼šæŸ¥çœ‹ã€ç¼–è¾‘ã€æ‰¹é‡æ“ä½œèŠ‚å‡æ—¥æ•°æ®
- âœ… **äº‹ä»¶ç®¡ç†**ï¼šç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„æ—¥ç¨‹äº‹ä»¶
- âœ… **ç”¨æˆ·ç®¡ç†**ï¼šæŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ã€QQ ç»‘å®šã€äº‹ä»¶ç»Ÿè®¡
- âœ… **åŒæ­¥æ—¥å¿—**ï¼šæŸ¥çœ‹æ•°æ®åŒæ­¥å†å²è®°å½•
- âœ… **é»„å†è¿åŠ¿**ï¼šç®¡ç†å†œå†ã€è¿åŠ¿æ•°æ®ï¼ˆå¾…å¡«å……ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šæ›´æ–°æœåŠ¡å™¨ä»£ç 

```bash
cd ~/kotlin_calendar
git pull origin master
```

### æ­¥éª¤ 2ï¼šåˆ›å»ºè¶…çº§ç”¨æˆ·

```bash
cd backend
python3 manage.py createsuperuser
```

**æŒ‰æç¤ºè¾“å…¥ï¼š**

```
Username: admin
Email address: your_email@example.com
Password: ********
Password (again): ********
Superuser created successfully.
```

**å¯†ç è¦æ±‚ï¼š**
- è‡³å°‘ 8 ä¸ªå­—ç¬¦
- ä¸èƒ½å¤ªå¸¸è§ï¼ˆå¦‚ "password123"ï¼‰
- ä¸èƒ½å…¨æ˜¯æ•°å­—

**æ¨èå¯†ç ï¼š** ä½¿ç”¨å¼ºå¯†ç ï¼Œä¾‹å¦‚ï¼š`Ralendar@2025!`

### æ­¥éª¤ 3ï¼šè®¿é—®åå°

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š

```
https://app7626.acapp.acwing.com.cn/admin/
```

ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ã€‚

---

## ğŸ¯ åŠŸèƒ½è¯¦è§£

### 1. ğŸ“… èŠ‚å‡æ—¥ç®¡ç†

**è·¯å¾„ï¼š** Admin é¦–é¡µ â†’ API â†’ Holidays

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… **é¢œè‰²æ ‡æ³¨**ï¼šæ³•å®šå‡æ—¥æ˜¾ç¤ºçº¢è‰²ï¼Œæ™®é€šå‡æœŸæ˜¾ç¤ºè“è‰²
- âœ… **Emoji æ˜¾ç¤º**ï¼šæ¯ä¸ªèŠ‚æ—¥éƒ½æœ‰å¯¹åº”çš„å›¾æ ‡
- âœ… **ç±»å‹è¿‡æ»¤**ï¼šæŒ‰ä¸»è¦èŠ‚æ—¥ã€å‡æœŸã€ä¼ ç»ŸèŠ‚æ—¥ç­‰åˆ†ç±»
- âœ… **æ—¥æœŸç­›é€‰**ï¼šæŒ‰å¹´ã€æœˆã€æ—¥å¿«é€Ÿç­›é€‰
- âœ… **æ‰¹é‡æ“ä½œ**ï¼šæ‰¹é‡æ ‡è®°ä¸ºæ³•å®šå‡æ—¥æˆ–ä¼‘æ¯æ—¥

**å¸¸ç”¨æ“ä½œï¼š**

```
1. æŸ¥çœ‹ 2025 å¹´èŠ‚å‡æ—¥ï¼š
   - ç‚¹å‡»é¡¶éƒ¨æ—¥æœŸå¯¼èˆª â†’ é€‰æ‹© 2025 å¹´

2. æœç´¢èŠ‚æ—¥ï¼š
   - å³ä¸Šè§’æœç´¢æ¡†è¾“å…¥"æ˜¥èŠ‚"

3. ç­›é€‰ç±»å‹ï¼š
   - å³ä¾§"ç±»å‹"ç­›é€‰å™¨ â†’ é€‰æ‹©"ä¸»è¦èŠ‚æ—¥"

4. ç¼–è¾‘èŠ‚å‡æ—¥ï¼š
   - ç‚¹å‡»èŠ‚æ—¥åç§° â†’ ä¿®æ”¹ä¿¡æ¯ â†’ ä¿å­˜

5. æ‰¹é‡æ“ä½œï¼š
   - å‹¾é€‰å¤šä¸ªèŠ‚å‡æ—¥
   - é€‰æ‹©åŠ¨ä½œï¼ˆå¦‚"æ ‡è®°ä¸ºæ³•å®šå‡æ—¥"ï¼‰
   - ç‚¹å‡»"æ‰§è¡Œ"
```

### 2. ğŸ”„ åŒæ­¥æ—¥å¿—

**è·¯å¾„ï¼š** Admin é¦–é¡µ â†’ API â†’ Data sync logs

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… **çŠ¶æ€æŒ‡ç¤ºå™¨**ï¼šæˆåŠŸâœ…ã€å¤±è´¥âŒã€è¿›è¡Œä¸­ğŸ”„
- âœ… **é¢œè‰²æ ‡ç­¾**ï¼šä¸åŒæ•°æ®ç±»å‹ç”¨ä¸åŒé¢œè‰²
- âœ… **è®°å½•ç»Ÿè®¡**ï¼šæ˜¾ç¤ºæ¯æ¬¡åŒæ­¥å¯¼å…¥çš„è®°å½•æ•°
- âœ… **åªè¯»æ¨¡å¼**ï¼šæ—¥å¿—è‡ªåŠ¨ç”Ÿæˆï¼Œä¸å¯æ‰‹åŠ¨åˆ›å»º

**æŸ¥çœ‹æœ€è¿‘åŒæ­¥ï¼š**
- é»˜è®¤æŒ‰æ—¶é—´å€’åºæ’åˆ—
- æŸ¥çœ‹åŒæ­¥èŒƒå›´ã€çŠ¶æ€ã€è®°å½•æ•°
- ç‚¹å‡»å¯æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœå¤±è´¥ï¼‰

### 3. ğŸ“ äº‹ä»¶ç®¡ç†

**è·¯å¾„ï¼š** Admin é¦–é¡µ â†’ API â†’ Events

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… **ç”¨æˆ·é“¾æ¥**ï¼šç‚¹å‡»ç”¨æˆ·åè·³è½¬åˆ°ç”¨æˆ·è¯¦æƒ…
- âœ… **æ¥æºæ ‡è¯†**ï¼šæ˜¾ç¤ºæ˜¯å¦æ¥è‡ª Roamio
- âœ… **æé†’çŠ¶æ€**ï¼šæ˜¾ç¤ºé‚®ä»¶æé†’è®¾ç½®å’Œå‘é€çŠ¶æ€
- âœ… **æ‰¹é‡æ“ä½œ**ï¼šæ‰¹é‡å¯ç”¨/ç¦ç”¨é‚®ä»¶æé†’

**å¸¸ç”¨æ“ä½œï¼š**

```
1. æŸ¥çœ‹æŸä¸ªç”¨æˆ·çš„æ‰€æœ‰äº‹ä»¶ï¼š
   - å³ä¸Šè§’æœç´¢æ¡†è¾“å…¥ç”¨æˆ·å

2. æŸ¥çœ‹ Roamio åŒæ­¥çš„äº‹ä»¶ï¼š
   - å³ä¾§ç­›é€‰å™¨ â†’ "Is from roamio" â†’ æ˜¯

3. æŸ¥çœ‹æœªå‘é€æé†’çš„äº‹ä»¶ï¼š
   - ç­›é€‰å™¨ â†’ "Email reminder" â†’ æ˜¯
   - ç­›é€‰å™¨ â†’ "Notification sent" â†’ å¦

4. é‡ç½®é€šçŸ¥çŠ¶æ€ï¼ˆé‡æ–°å‘é€æé†’ï¼‰ï¼š
   - å‹¾é€‰äº‹ä»¶
   - é€‰æ‹©"é‡ç½®é€šçŸ¥çŠ¶æ€"
   - ç‚¹å‡»"æ‰§è¡Œ"
```

### 4. ğŸ‘¥ ç”¨æˆ·ç®¡ç†

**è·¯å¾„ï¼š** Admin é¦–é¡µ â†’ Authentication and Authorization â†’ Users

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… **äº‹ä»¶ç»Ÿè®¡**ï¼šæ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·çš„äº‹ä»¶æ•°é‡
- âœ… **QQ ä¿¡æ¯**ï¼šåœ¨ç”¨æˆ·è¯¦æƒ…é¡µæ˜¾ç¤º QQ ç»‘å®šä¿¡æ¯
- âœ… **æƒé™ç®¡ç†**ï¼šè®¾ç½®ç®¡ç†å‘˜æƒé™
- âœ… **æ´»è·ƒçŠ¶æ€**ï¼šå¯ç”¨/ç¦ç”¨ç”¨æˆ·è´¦å·

**æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…ï¼š**
1. ç‚¹å‡»ç”¨æˆ·åè¿›å…¥è¯¦æƒ…é¡µ
2. ä¸‹æ–¹æ˜¾ç¤º QQ è´¦å·ä¿¡æ¯ï¼ˆOpenIDã€UnionIDã€å¤´åƒï¼‰
3. æŸ¥çœ‹äº‹ä»¶æ•°é‡ï¼šç‚¹å‡»äº‹ä»¶æ•°é“¾æ¥

### 5. ğŸ” QQ ç”¨æˆ·ä¿¡æ¯

**è·¯å¾„ï¼š** Admin é¦–é¡µ â†’ API â†’ QQ users

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… **æ•°æ®è„±æ•**ï¼šOpenID å’Œ UnionID åªæ˜¾ç¤ºéƒ¨åˆ†
- âœ… **å¤´åƒçŠ¶æ€**ï¼šæ˜¾ç¤ºæ˜¯å¦æœ‰å¤´åƒ
- âœ… **åªè¯»å­—æ®µ**ï¼šOAuth æ•°æ®ä¸å¯ä¿®æ”¹

---

## ğŸ¨ ç•Œé¢ç‰¹è‰²

### é¢œè‰²ç³»ç»Ÿ

| å…ƒç´  | é¢œè‰² | å«ä¹‰ |
|------|------|------|
| ğŸ”´ çº¢è‰² | `#e74c3c` | æ³•å®šå‡æ—¥ã€ä¸»è¦èŠ‚æ—¥ã€å¤±è´¥çŠ¶æ€ |
| ğŸ”µ è“è‰² | `#3498db` | æ™®é€šå‡æœŸã€èŠ‚å‡æ—¥æ•°æ® |
| ğŸŸ¢ ç»¿è‰² | `#27ae60` | æˆåŠŸçŠ¶æ€ã€å·²å®Œæˆ |
| ğŸŸ  æ©™è‰² | `#f39c12` | è­¦å‘Šã€å¾…å¤„ç†ã€é»„å†æ•°æ® |
| ğŸŸ£ ç´«è‰² | `#9b59b6` | å›½é™…èŠ‚æ—¥ã€è¿åŠ¿æ•°æ® |
| âšª ç°è‰² | `#95a5a6` | æœªå¯ç”¨ã€æ— æ•°æ® |

### å›¾æ ‡ç³»ç»Ÿ

- âœ… æˆåŠŸ / æ˜¯ / å·²å®Œæˆ
- âŒ å¤±è´¥ / å¦ / é”™è¯¯
- â³ å¾…å¤„ç† / ç­‰å¾…ä¸­
- ğŸ”„ è¿›è¡Œä¸­ / åŒæ­¥ä¸­
- ğŸ“§ é‚®ä»¶æé†’
- ğŸŠğŸ§¨ğŸŒ¿ğŸ’ªğŸ‰ğŸ¥®ğŸ‡¨ğŸ‡³ å„ç§èŠ‚æ—¥

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. å¿«é€ŸæŸ¥æ‰¾

**æ—¥æœŸå¯¼èˆªï¼š**
- åœ¨èŠ‚å‡æ—¥ã€äº‹ä»¶ç®¡ç†é¡µé¢ï¼Œé¡¶éƒ¨æœ‰æ—¥æœŸå¯¼èˆªæ 
- ç‚¹å‡»å¹´ä»½å¯å¿«é€Ÿåˆ‡æ¢å¹´ä»½

**æœç´¢æ¡†ï¼š**
- æ”¯æŒæ¨¡ç³Šæœç´¢
- å¯æœç´¢å¤šä¸ªå­—æ®µï¼ˆå¦‚èŠ‚æ—¥åç§°ã€æè¿°ã€ç”¨æˆ·åç­‰ï¼‰

**ç­›é€‰å™¨ï¼š**
- å³ä¾§ç­›é€‰å™¨æ”¯æŒå¤šæ¡ä»¶ç»„åˆ
- ç­›é€‰å URL ä¼šå˜åŒ–ï¼Œå¯ä»¥æ”¶è—å¸¸ç”¨ç­›é€‰

### 2. æ‰¹é‡æ“ä½œ

**èŠ‚å‡æ—¥æ‰¹é‡æ“ä½œï¼š**
1. å‹¾é€‰å¤šä¸ªèŠ‚å‡æ—¥
2. é€‰æ‹©åŠ¨ä½œä¸‹æ‹‰æ¡†
3. ç‚¹å‡»"æ‰§è¡Œ"æŒ‰é’®

**å¯ç”¨çš„æ‰¹é‡åŠ¨ä½œï¼š**
- æ ‡è®°ä¸ºæ³•å®šå‡æ—¥
- æ ‡è®°ä¸ºä¼‘æ¯æ—¥
- åˆ é™¤é€‰ä¸­é¡¹

### 3. å¯¼å‡ºæ•°æ®

**æ–¹æ³• 1ï¼šé€šè¿‡é¡µé¢æ“ä½œ**
1. ä½¿ç”¨ç­›é€‰å™¨é€‰æ‹©è¦å¯¼å‡ºçš„æ•°æ®
2. å‹¾é€‰å…¨éƒ¨æˆ–éƒ¨åˆ†è®°å½•
3. é€‰æ‹©"åˆ é™¤é€‰ä¸­é¡¹"ï¼ˆæ³¨æ„ï¼šè¿™ä¼šçœŸçš„åˆ é™¤ï¼ï¼‰

**æ–¹æ³• 2ï¼šä½¿ç”¨ Django å‘½ä»¤**
```bash
# å¯¼å‡ºèŠ‚å‡æ—¥æ•°æ®
python3 manage.py dumpdata api.Holiday --indent 2 > holidays.json

# å¯¼å‡º 2025 å¹´çš„æ•°æ®
python3 manage.py dumpdata api.Holiday --indent 2 \
  --natural-foreign --natural-primary > holidays_2025.json
```

### 4. æ•°æ®ä¿®å¤

**åœºæ™¯ï¼šèŠ‚å‡æ—¥æ•°æ®æœ‰è¯¯**

1. åœ¨ Admin ä¸­æ‰¾åˆ°é”™è¯¯çš„è®°å½•
2. ç‚¹å‡»è¿›å…¥ç¼–è¾‘é¡µé¢
3. ä¿®æ”¹ä¿¡æ¯
4. ç‚¹å‡»"ä¿å­˜"

**åœºæ™¯ï¼šæ‰¹é‡ä¿®å¤**

å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
cd ~/kotlin_calendar/backend
python3 manage.py shell
```

```python
from api.models import Holiday

# æ‰¹é‡ä¿®æ”¹
Holiday.objects.filter(name__contains='æ˜¥èŠ‚').update(
    emoji='ğŸ§¨',
    holiday_group='æ˜¥èŠ‚å‡æœŸ'
)
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. å¯†ç ç®¡ç†

- âœ… ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘ 12 ä½ï¼ŒåŒ…å«å¤§å°å†™ã€æ•°å­—ã€ç¬¦å·ï¼‰
- âœ… ä¸è¦ä½¿ç”¨ä¸å…¶ä»–è´¦å·ç›¸åŒçš„å¯†ç 
- âœ… å®šæœŸæ›´æ¢å¯†ç ï¼ˆAdmin â†’ Change passwordï¼‰

### 2. æƒé™ç®¡ç†

- âœ… åªç»™éœ€è¦çš„äººåˆ›å»ºè¶…çº§ç”¨æˆ·è´¦å·
- âœ… æ™®é€šç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ Staff æƒé™ï¼ˆä¸æ˜¯ Superuserï¼‰
- âœ… å®šæœŸæ£€æŸ¥æ´»è·ƒçš„ç®¡ç†å‘˜è´¦å·

### 3. æ“ä½œå®¡è®¡

- âœ… Admin ä¼šè®°å½•æ‰€æœ‰æ“ä½œå†å²
- âœ… å¯ä»¥æŸ¥çœ‹è°åœ¨ä»€ä¹ˆæ—¶å€™ä¿®æ”¹äº†ä»€ä¹ˆæ•°æ®
- âœ… å®šæœŸæ£€æŸ¥åŒæ­¥æ—¥å¿—

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
cd ~/kotlin_calendar/backend
python3 manage.py changepassword admin
```

### Q2: æ— æ³•ç™»å½•ï¼Œæç¤º"è´¦å·ç¦ç”¨"

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
python3 manage.py shell
```

```python
from django.contrib.auth.models import User
user = User.objects.get(username='admin')
user.is_active = True
user.save()
```

### Q3: è¯¯åˆ é™¤äº†æ•°æ®æ€ä¹ˆåŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ 1ï¼šä»å¤‡ä»½æ¢å¤**

```bash
# å¦‚æœæœ‰å¤‡ä»½
python3 manage.py loaddata holidays_backup.json
```

**è§£å†³æ–¹æ¡ˆ 2ï¼šé‡æ–°åŒæ­¥**

```bash
# é‡æ–°å¯¼å…¥èŠ‚å‡æ—¥æ•°æ®
python3 manage.py import_holidays --start-year 2024 --end-year 2027 --replace
```

### Q4: é¡µé¢æ˜¾ç¤ºæ··ä¹±

**è§£å†³æ–¹æ¡ˆï¼š**

1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
   ```bash
   cd ~/kotlin_calendar/backend
   python3 manage.py collectstatic --noinput
   pkill -HUP uwsgi
   ```

---

## ğŸ“± ç§»åŠ¨ç«¯è®¿é—®

Django Admin æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œå¯ä»¥åœ¨æ‰‹æœºä¸Šè®¿é—®ï¼š

```
https://app7626.acapp.acwing.com.cn/admin/
```

**ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼š**
- è‡ªåŠ¨é€‚é…å±å¹•å¤§å°
- è§¦æ‘¸å‹å¥½çš„æŒ‰é’®
- ç®€åŒ–çš„å¯¼èˆªèœå•

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### å»ºè®®æ“ä½œé¡ºåº

1. âœ… **ç™»å½•åå°**ï¼šç†Ÿæ‚‰ç•Œé¢
2. âœ… **æŸ¥çœ‹èŠ‚å‡æ—¥**ï¼šæ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®
3. âœ… **æŸ¥çœ‹äº‹ä»¶**ï¼šäº†è§£ç”¨æˆ·ä½¿ç”¨æƒ…å†µ
4. âœ… **æŸ¥çœ‹åŒæ­¥æ—¥å¿—**ï¼šç¡®è®¤è‡ªåŠ¨åŒæ­¥æ˜¯å¦æ­£å¸¸
5. âœ… **æµ‹è¯•ç¼–è¾‘**ï¼šå°è¯•ä¿®æ”¹ä¸€ä¸ªæµ‹è¯•æ•°æ®

### è¿›é˜¶åŠŸèƒ½

- [ ] åˆ›å»ºæ™®é€šç®¡ç†å‘˜è´¦å·ï¼ˆStaff æƒé™ï¼‰
- [ ] è‡ªå®šä¹‰ç­›é€‰å™¨å’Œåˆ—è¡¨æ˜¾ç¤º
- [ ] å¯¼å‡ºæ•°æ®æŠ¥è¡¨
- [ ] è®¾ç½®æ•°æ®å¤‡ä»½è®¡åˆ’

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- ğŸ“– Django Admin å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.djangoproject.com/en/stable/ref/contrib/admin/
- ğŸ¨ ç•Œé¢å®šåˆ¶æŒ‡å—ï¼š`backend/api/admin.py`
- ğŸ› é—®é¢˜åé¦ˆï¼šæ£€æŸ¥ Admin æ“ä½œæ—¥å¿—

---

**âœ… ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼** ğŸ‰

ç™»å½•åœ°å€ï¼šhttps://app7626.acapp.acwing.com.cn/admin/

