# â‘¤ æ•°æ®åº“å»ºæ¨¡æŠ¥å‘Š

## ğŸ“– ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ•°æ®åº“è®¾è®¡åŸåˆ™](#æ•°æ®åº“è®¾è®¡åŸåˆ™)
3. [Androidç«¯æ•°æ®åº“è®¾è®¡](#androidç«¯æ•°æ®åº“è®¾è®¡)
4. [åç«¯æ•°æ®åº“è®¾è®¡](#åç«¯æ•°æ®åº“è®¾è®¡)
5. [æ•°æ®åº“å…³ç³»å›¾](#æ•°æ®åº“å…³ç³»å›¾)
6. [æ•°æ®åŒæ­¥ç­–ç•¥](#æ•°æ®åŒæ­¥ç­–ç•¥)
7. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
8. [æ•°æ®è¿ç§»æ–¹æ¡ˆ](#æ•°æ®è¿ç§»æ–¹æ¡ˆ)

---

## 1. æ¦‚è¿°

Ralendar é‡‡ç”¨**å‰åç«¯åˆ†ç¦»çš„æ•°æ®åº“æ¶æ„**ï¼š
- **Androidç«¯**ï¼šä½¿ç”¨ Room Databaseï¼ˆSQLiteï¼‰å­˜å‚¨æœ¬åœ°æ•°æ®
- **åç«¯**ï¼šä½¿ç”¨ Django ORMï¼ˆPostgreSQL/SQLiteï¼‰å­˜å‚¨äº‘ç«¯æ•°æ®
- **æ•°æ®åŒæ­¥**ï¼šé€šè¿‡ RESTful API å®ç°æœ¬åœ°ä¸äº‘ç«¯çš„æ•°æ®åŒæ­¥

### æ•°æ®åº“æ¶æ„å›¾

![æ•°æ®åº“æ¶æ„å›¾](uml/uml_images/9.æ•°æ®åº“æ¶æ„å›¾.png)

---

## 2. æ•°æ®åº“è®¾è®¡åŸåˆ™

### 2.1 è®¾è®¡ç†å¿µ

- **æœ¬åœ°ä¼˜å…ˆ**ï¼šAndroidç«¯ä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ•°æ®ï¼Œç¦»çº¿ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨
- **äº‘ç«¯åŒæ­¥**ï¼šæ”¯æŒäº‘ç«¯æ¨¡å¼ï¼Œæ•°æ®å¯è·¨è®¾å¤‡åŒæ­¥
- **æ•°æ®ä¸€è‡´æ€§**ï¼šé€šè¿‡ç‰ˆæœ¬æ§åˆ¶å’Œå†²çªè§£å†³æœºåˆ¶ä¿è¯æ•°æ®ä¸€è‡´
- **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ç´¢å¼•ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

### 2.2 å‘½åè§„èŒƒ

- **è¡¨å**ï¼šå°å†™ï¼Œå¤æ•°å½¢å¼ï¼ˆå¦‚ `events`ã€`subscriptions`ï¼‰
- **å­—æ®µå**ï¼šé©¼å³°å‘½åï¼ˆå¦‚ `dateTime`ã€`subscriptionId`ï¼‰
- **ä¸»é”®**ï¼šç»Ÿä¸€ä½¿ç”¨ `id`ï¼ˆLong ç±»å‹ï¼‰
- **å¤–é”®**ï¼šä½¿ç”¨ `xxxId` æ ¼å¼ï¼ˆå¦‚ `subscriptionId`ï¼‰

### 2.3 æ•°æ®ç±»å‹æ˜ å°„

| Android (Room) | åç«¯ (Django) | è¯´æ˜ |
|----------------|---------------|------|
| Long | BigIntegerField | æ—¶é—´æˆ³ã€ID |
| String | CharField/TextField | æ–‡æœ¬æ•°æ® |
| Int | IntegerField | æ•´æ•° |
| Double | FloatField | æµ®ç‚¹æ•° |
| Boolean | BooleanField | å¸ƒå°”å€¼ |
| æ—¶é—´æˆ³ (Long) | DateTimeField | æ—¥æœŸæ—¶é—´ |

---

## 3. Androidç«¯æ•°æ®åº“è®¾è®¡

### 3.1 æ•°æ®åº“æ¦‚è¿°

- **æ•°æ®åº“åç§°**ï¼š`calendar_database`
- **æ•°æ®åº“ç‰ˆæœ¬**ï¼šv3
- **ORMæ¡†æ¶**ï¼šRoom Persistence Library
- **å­˜å‚¨ä½ç½®**ï¼š`/data/data/com.ncu.kotlincalendar/databases/`

### 3.2 æ•°æ®è¡¨è®¾è®¡

#### 3.2.1 Event è¡¨ï¼ˆæ—¥ç¨‹è¡¨ï¼‰

**è¡¨å**ï¼š`events`

**ç”¨é€”**ï¼šå­˜å‚¨ç”¨æˆ·çš„æ‰€æœ‰æ—¥ç¨‹äº‹ä»¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹å’Œè®¢é˜…çš„æ—¥ç¨‹ã€‚

**è¡¨ç»“æ„**ï¼š

| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | Long | PRIMARY KEY, AUTO_INCREMENT | ä¸»é”®ï¼Œè‡ªå¢ |
| title | String | NOT NULL | æ—¥ç¨‹æ ‡é¢˜ |
| description | String | DEFAULT '' | æ—¥ç¨‹æè¿° |
| dateTime | Long | NOT NULL | æ—¥æœŸæ—¶é—´ï¼ˆUnixæ—¶é—´æˆ³ï¼Œæ¯«ç§’ï¼‰ |
| reminderMinutes | Int | DEFAULT 0 | æå‰æé†’åˆ†é’Ÿæ•°ï¼ˆ0=ä¸æé†’ï¼‰ |
| subscriptionId | Long | NULLABLE | å…³è”çš„è®¢é˜…IDï¼ˆnull=ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹ï¼‰ |
| locationName | String | DEFAULT '' | åœ°ç‚¹åç§° |
| latitude | Double | DEFAULT 0.0 | çº¬åº¦ï¼ˆ0è¡¨ç¤ºæ— åœ°ç‚¹ï¼‰ |
| longitude | Double | DEFAULT 0.0 | ç»åº¦ï¼ˆ0è¡¨ç¤ºæ— åœ°ç‚¹ï¼‰ |
| createdAt | Long | DEFAULT å½“å‰æ—¶é—´æˆ³ | åˆ›å»ºæ—¶é—´æˆ³ |

**ç´¢å¼•è®¾è®¡**ï¼š

```sql
-- æ—¥æœŸç´¢å¼•ï¼šåŠ é€Ÿæ—¥æœŸæŸ¥è¯¢
CREATE INDEX idx_events_dateTime ON events(dateTime);

-- è®¢é˜…ç´¢å¼•ï¼šåŠ é€Ÿè®¢é˜…äº‹ä»¶æŸ¥è¯¢
CREATE INDEX idx_events_subscriptionId ON events(subscriptionId);
```

**å®ä½“ç±»ä»£ç **ï¼š

```kotlin
@Entity(
    tableName = "events",
    indices = [
        Index(value = ["dateTime"]),
        Index(value = ["subscriptionId"])
    ]
)
data class Event(
    @PrimaryKey(autoGenerate = true)
    val id: Long = 0,
    
    val title: String,
    val description: String = "",
    val dateTime: Long,
    val reminderMinutes: Int = 0,
    val subscriptionId: Long? = null,
    
    val locationName: String = "",
    val latitude: Double = 0.0,
    val longitude: Double = 0.0,
    
    val createdAt: Long = System.currentTimeMillis()
)
```

**å­—æ®µè¯´æ˜**ï¼š

- **id**ï¼šä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚ç”¨äºå”¯ä¸€æ ‡è¯†æ¯æ¡æ—¥ç¨‹ã€‚
- **title**ï¼šæ—¥ç¨‹æ ‡é¢˜ï¼Œå¿…å¡«ã€‚æ˜¾ç¤ºåœ¨æ—¥å†ä¸Šçš„æ ‡é¢˜ã€‚
- **description**ï¼šæ—¥ç¨‹æè¿°ï¼Œå¯é€‰ã€‚è¯¦ç»†è¯´æ˜ã€‚
- **dateTime**ï¼šæ—¥æœŸæ—¶é—´ï¼Œå¿…å¡«ã€‚ä½¿ç”¨Unixæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰å­˜å‚¨ï¼Œæ–¹ä¾¿æ’åºå’ŒæŸ¥è¯¢ã€‚
- **reminderMinutes**ï¼šæå‰æé†’åˆ†é’Ÿæ•°ã€‚0è¡¨ç¤ºä¸æé†’ï¼Œå¦‚30è¡¨ç¤ºæå‰30åˆ†é’Ÿæé†’ã€‚
- **subscriptionId**ï¼šè®¢é˜…IDï¼Œå¯ç©ºã€‚å¦‚æœä¸ºnullï¼Œè¡¨ç¤ºè¿™æ˜¯ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„æ—¥ç¨‹ï¼›å¦‚æœæœ‰å€¼ï¼Œè¡¨ç¤ºè¿™æ˜¯ä»æŸä¸ªè®¢é˜…æºåŒæ­¥æ¥çš„æ—¥ç¨‹ã€‚
- **locationName**ï¼šåœ°ç‚¹åç§°ï¼Œå¦‚"æ˜Ÿå·´å…‹(åŒ—äº¬è·¯åº—)"ã€‚
- **latitude/longitude**ï¼šç»çº¬åº¦åæ ‡ï¼Œç”¨äºåœ°å›¾å®šä½å’Œå¯¼èˆªã€‚
- **createdAt**ï¼šåˆ›å»ºæ—¶é—´æˆ³ï¼Œç”¨äºæ•°æ®åŒæ­¥å’Œæ’åºã€‚

**æ•°æ®ç¤ºä¾‹**ï¼š

```kotlin
Event(
    id = 1,
    title = "å›¢é˜Ÿä¼šè®®",
    description = "è®¨è®ºé¡¹ç›®è¿›åº¦",
    dateTime = 1702274400000L,  // 2024-01-10 14:00:00
    reminderMinutes = 30,
    subscriptionId = null,  // ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹
    locationName = "ä¼šè®®å®¤A",
    latitude = 28.6776,
    longitude = 115.8974,
    createdAt = 1702270800000L
)

Event(
    id = 2,
    title = "æ˜¥èŠ‚",
    description = "ä¸­å›½æ³•å®šèŠ‚å‡æ—¥",
    dateTime = 1704067200000L,  // 2024-01-01 00:00:00
    reminderMinutes = 0,
    subscriptionId = 1,  // æ¥è‡ªè®¢é˜…ID=1çš„è®¢é˜…æº
    locationName = "",
    latitude = 0.0,
    longitude = 0.0,
    createdAt = 1702270800000L
)
```

#### 3.2.2 Subscription è¡¨ï¼ˆè®¢é˜…è¡¨ï¼‰

**è¡¨å**ï¼š`subscriptions`

**ç”¨é€”**ï¼šå­˜å‚¨ç”¨æˆ·è®¢é˜…çš„æ—¥å†æºä¿¡æ¯ï¼Œå¦‚"ä¸­å›½æ³•å®šèŠ‚å‡æ—¥"ã€"ä¸–ç•Œçºªå¿µæ—¥"ç­‰ã€‚

**è¡¨ç»“æ„**ï¼š

| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | Long | PRIMARY KEY, AUTO_INCREMENT | ä¸»é”®ï¼Œè‡ªå¢ |
| name | String | NOT NULL | è®¢é˜…åç§°ï¼ˆæ˜¾ç¤ºç”¨ï¼‰ |
| slug | String | NOT NULL | åç«¯æ ‡è¯†ï¼ˆAPIæŸ¥è¯¢ç”¨ï¼‰ |
| description | String | DEFAULT '' | æè¿°ä¿¡æ¯ |
| color | String | DEFAULT '#667eea' | æ˜¾ç¤ºé¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰ |
| icon | String | DEFAULT 'ğŸ“…' | å›¾æ ‡emoji |
| isEnabled | Boolean | DEFAULT true | æ˜¯å¦å¯ç”¨æ˜¾ç¤º |
| eventCount | Int | DEFAULT 0 | äº‹ä»¶æ•°é‡ï¼ˆç»Ÿè®¡ç”¨ï¼‰ |
| lastSyncTime | Long | DEFAULT 0 | æœ€ååŒæ­¥æ—¶é—´æˆ³ |
| createdAt | Long | DEFAULT å½“å‰æ—¶é—´æˆ³ | åˆ›å»ºæ—¶é—´æˆ³ |

**å®ä½“ç±»ä»£ç **ï¼š

```kotlin
@Entity(tableName = "subscriptions")
data class Subscription(
    @PrimaryKey(autoGenerate = true)
    val id: Long = 0,
    
    val name: String,              // "ä¸­å›½æ³•å®šèŠ‚å‡æ—¥"
    val slug: String,              // "china-holidays"
    val description: String = "",
    val color: String = "#667eea",
    val icon: String = "ğŸ“…",
    val isEnabled: Boolean = true,
    val eventCount: Int = 0,
    val lastSyncTime: Long = 0,
    val createdAt: Long = System.currentTimeMillis()
)
```

**å­—æ®µè¯´æ˜**ï¼š

- **id**ï¼šä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
- **name**ï¼šè®¢é˜…åç§°ï¼Œç”¨äºç•Œé¢æ˜¾ç¤ºï¼Œå¦‚"ä¸­å›½æ³•å®šèŠ‚å‡æ—¥"ã€‚
- **slug**ï¼šåç«¯æ ‡è¯†ï¼Œç”¨äºAPIæŸ¥è¯¢ï¼Œå¦‚"china-holidays"ã€‚è¿™ä¸ªå€¼å¯¹åº”åç«¯çš„è®¢é˜…æºslugã€‚
- **description**ï¼šè®¢é˜…æè¿°ä¿¡æ¯ï¼Œç®€è¦è¯´æ˜è¿™ä¸ªè®¢é˜…åŒ…å«ä»€ä¹ˆå†…å®¹ã€‚
- **color**ï¼šæ˜¾ç¤ºé¢œè‰²ï¼Œç”¨äºåœ¨æ—¥å†ä¸ŠåŒºåˆ†ä¸åŒçš„è®¢é˜…æºã€‚
- **icon**ï¼šå›¾æ ‡emojiï¼Œç”¨äºç•Œé¢æ˜¾ç¤ºã€‚
- **isEnabled**ï¼šæ˜¯å¦å¯ç”¨æ˜¾ç¤ºã€‚ç”¨æˆ·å¯ä»¥ä¸´æ—¶ç¦ç”¨æŸä¸ªè®¢é˜…ï¼Œä½†ä¸ä¼šåˆ é™¤è®¢é˜…å…³ç³»ã€‚
- **eventCount**ï¼šäº‹ä»¶æ•°é‡ï¼Œç»Ÿè®¡è¿™ä¸ªè®¢é˜…æºæœ‰å¤šå°‘ä¸ªæ—¥ç¨‹äº‹ä»¶ã€‚
- **lastSyncTime**ï¼šæœ€ååŒæ­¥æ—¶é—´æˆ³ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åŒæ­¥ã€‚
- **createdAt**ï¼šåˆ›å»ºæ—¶é—´æˆ³ã€‚

**æ•°æ®ç¤ºä¾‹**ï¼š

```kotlin
Subscription(
    id = 1,
    name = "ä¸­å›½æ³•å®šèŠ‚å‡æ—¥",
    slug = "china-holidays",
    description = "åŒ…å«å…ƒæ—¦ã€æ˜¥èŠ‚ã€æ¸…æ˜èŠ‚ã€åŠ³åŠ¨èŠ‚ã€ç«¯åˆèŠ‚ã€ä¸­ç§‹èŠ‚ã€å›½åº†èŠ‚ç­‰",
    color = "#FF6B6B",
    icon = "ğŸ‰",
    isEnabled = true,
    eventCount = 11,  // 2024å¹´æœ‰11ä¸ªæ³•å®šèŠ‚å‡æ—¥
    lastSyncTime = 1702270800000L,
    createdAt = 1702270800000L
)

Subscription(
    id = 2,
    name = "ä¸–ç•Œçºªå¿µæ—¥",
    slug = "world-days",
    description = "å›½é™…èŠ‚æ—¥å’Œçºªå¿µæ—¥",
    color = "#4ECDC4",
    icon = "ğŸŒ",
    isEnabled = true,
    eventCount = 365,  // æ¯å¤©éƒ½æœ‰çºªå¿µæ—¥
    lastSyncTime = 1702270800000L,
    createdAt = 1702270800000L
)
```

### 3.3 DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰è®¾è®¡

#### 3.3.1 EventDao

**æ¥å£å®šä¹‰**ï¼š

```kotlin
@Dao
interface EventDao {
    // æŸ¥è¯¢æ‰€æœ‰æ—¥ç¨‹
    @Query("SELECT * FROM events ORDER BY dateTime ASC")
    suspend fun getAllEvents(): List<Event>
    
    // æŸ¥è¯¢æŒ‡å®šæ—¥æœŸçš„æ‰€æœ‰æ—¥ç¨‹
    @Query("""
        SELECT * FROM events 
        WHERE date(dateTime / 1000, 'unixepoch') = date(:date / 1000, 'unixepoch') 
        ORDER BY dateTime ASC
    """)
    suspend fun getEventsForDate(date: Long): List<Event>
    
    // æŸ¥è¯¢ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹ï¼ˆsubscriptionIdä¸ºnullï¼‰
    @Query("SELECT * FROM events WHERE subscriptionId IS NULL ORDER BY dateTime ASC")
    suspend fun getUserEvents(): List<Event>
    
    // æŸ¥è¯¢æŒ‡å®šè®¢é˜…çš„æ—¥ç¨‹
    @Query("SELECT * FROM events WHERE subscriptionId = :subscriptionId ORDER BY dateTime ASC")
    suspend fun getEventsBySubscription(subscriptionId: Long): List<Event>
    
    // æ’å…¥æ—¥ç¨‹
    @Insert
    suspend fun insert(event: Event): Long
    
    // æ›´æ–°æ—¥ç¨‹
    @Update
    suspend fun update(event: Event)
    
    // åˆ é™¤æ—¥ç¨‹
    @Delete
    suspend fun delete(event: Event)
    
    // æ ¹æ®è®¢é˜…IDåˆ é™¤æ‰€æœ‰å…³è”çš„æ—¥ç¨‹
    @Query("DELETE FROM events WHERE subscriptionId = :subscriptionId")
    suspend fun deleteBySubscriptionId(subscriptionId: Long)
}
```

**æŸ¥è¯¢æ–¹æ³•è¯´æ˜**ï¼š

- **getAllEvents()**ï¼šè·å–æ‰€æœ‰æ—¥ç¨‹ï¼ŒæŒ‰æ—¶é—´å‡åºæ’åˆ—ã€‚
- **getEventsForDate()**ï¼šè·å–æŒ‡å®šæ—¥æœŸçš„æ‰€æœ‰æ—¥ç¨‹ã€‚ä½¿ç”¨æ—¥æœŸæ¯”è¾ƒï¼Œå¿½ç•¥æ—¶é—´éƒ¨åˆ†ã€‚
- **getUserEvents()**ï¼šè·å–ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„æ—¥ç¨‹ï¼ˆä¸åŒ…æ‹¬è®¢é˜…çš„æ—¥ç¨‹ï¼‰ã€‚
- **getEventsBySubscription()**ï¼šè·å–æŸä¸ªè®¢é˜…æºçš„æ‰€æœ‰æ—¥ç¨‹ã€‚
- **insert()**ï¼šæ’å…¥æ–°æ—¥ç¨‹ï¼Œè¿”å›æ’å…¥åçš„ä¸»é”®IDã€‚
- **update()**ï¼šæ›´æ–°æ—¥ç¨‹ä¿¡æ¯ã€‚
- **delete()**ï¼šåˆ é™¤æ—¥ç¨‹ã€‚
- **deleteBySubscriptionId()**ï¼šåˆ é™¤æŸä¸ªè®¢é˜…æºçš„æ‰€æœ‰æ—¥ç¨‹ï¼ˆå–æ¶ˆè®¢é˜…æ—¶ä½¿ç”¨ï¼‰ã€‚

#### 3.3.2 SubscriptionDao

**æ¥å£å®šä¹‰**ï¼š

```kotlin
@Dao
interface SubscriptionDao {
    // æŸ¥è¯¢æ‰€æœ‰è®¢é˜…
    @Query("SELECT * FROM subscriptions ORDER BY createdAt ASC")
    suspend fun getAllSubscriptions(): List<Subscription>
    
    // æŸ¥è¯¢å¯ç”¨çš„è®¢é˜…
    @Query("SELECT * FROM subscriptions WHERE isEnabled = 1 ORDER BY createdAt ASC")
    suspend fun getEnabledSubscriptions(): List<Subscription>
    
    // æ ¹æ®slugæŸ¥è¯¢è®¢é˜…
    @Query("SELECT * FROM subscriptions WHERE slug = :slug LIMIT 1")
    suspend fun getSubscriptionBySlug(slug: String): Subscription?
    
    // æ ¹æ®IDæŸ¥è¯¢è®¢é˜…
    @Query("SELECT * FROM subscriptions WHERE id = :id LIMIT 1")
    suspend fun getSubscriptionById(id: Long): Subscription?
    
    // æ’å…¥è®¢é˜…
    @Insert
    suspend fun insert(subscription: Subscription): Long
    
    // æ›´æ–°è®¢é˜…
    @Update
    suspend fun update(subscription: Subscription)
    
    // åˆ é™¤è®¢é˜…
    @Delete
    suspend fun delete(subscription: Subscription)
}
```

### 3.4 æ•°æ®åº“å®ä¾‹ç®¡ç†

**AppDatabase ç±»**ï¼š

```kotlin
@Database(
    entities = [Event::class, Subscription::class], 
    version = 3, 
    exportSchema = false
)
abstract class AppDatabase : RoomDatabase() {
    
    abstract fun eventDao(): EventDao
    abstract fun subscriptionDao(): SubscriptionDao
    
    companion object {
        @Volatile
        private var INSTANCE: AppDatabase? = null
        
        fun getDatabase(context: Context): AppDatabase {
            return INSTANCE ?: synchronized(this) {
                val instance = Room.databaseBuilder(
                    context.applicationContext,
                    AppDatabase::class.java,
                    "calendar_database"
                )
                    .fallbackToDestructiveMigration()  // å¼€å‘é˜¶æ®µå…è®¸ç ´åæ€§è¿ç§»
                    .build()
                INSTANCE = instance
                instance
            }
        }
    }
}
```

**æ•°æ®åº“ç‰ˆæœ¬å†å²**ï¼š

- **v1**ï¼šåˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«åŸºç¡€çš„Eventå’ŒSubscriptionè¡¨ã€‚
- **v2**ï¼šæ·»åŠ åœ°å›¾å¯¼èˆªå­—æ®µï¼ˆlocationName, latitude, longitudeï¼‰ã€‚
- **v3**ï¼šæ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼ˆdateTime, subscriptionIdï¼‰ã€‚

---

## 4. åç«¯æ•°æ®åº“è®¾è®¡

### 4.1 æ•°æ®åº“æ¦‚è¿°

- **ORMæ¡†æ¶**ï¼šDjango ORM
- **æ•°æ®åº“**ï¼šPostgreSQLï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰/ SQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- **è¿ç§»ç®¡ç†**ï¼šDjango Migrations

### 4.2 æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### 4.2.1 Event æ¨¡å‹ï¼ˆæ—¥ç¨‹æ¨¡å‹ï¼‰

**æ¨¡å‹å®šä¹‰**ï¼š

```python
from django.db import models
from django.contrib.auth.models import User

class Event(models.Model):
    """
    æ—¥ç¨‹äº‹ä»¶æ¨¡å‹
    
    å­˜å‚¨ç”¨æˆ·çš„æ‰€æœ‰æ—¥ç¨‹ï¼ŒåŒ…æ‹¬ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹å’Œè®¢é˜…çš„æ—¥ç¨‹ã€‚
    """
    # åŸºæœ¬ä¿¡æ¯
    id = models.BigAutoField(primary_key=True)
    title = models.CharField(max_length=200, help_text="æ—¥ç¨‹æ ‡é¢˜")
    description = models.TextField(blank=True, default="", help_text="æ—¥ç¨‹æè¿°")
    
    # æ—¶é—´ä¿¡æ¯
    start_time = models.DateTimeField(help_text="å¼€å§‹æ—¶é—´")
    end_time = models.DateTimeField(null=True, blank=True, help_text="ç»“æŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰")
    reminder_minutes = models.IntegerField(default=0, help_text="æå‰æé†’åˆ†é’Ÿæ•°ï¼ˆ0=ä¸æé†’ï¼‰")
    
    # å…³è”ä¿¡æ¯
    user = models.ForeignKey(
        User, 
        on_delete=models.CASCADE, 
        related_name='events',
        null=True, 
        blank=True,
        help_text="åˆ›å»ºè€…ï¼ˆnullè¡¨ç¤ºå…¬å¼€è®¢é˜…çš„æ—¥ç¨‹ï¼‰"
    )
    subscription = models.ForeignKey(
        'Subscription',
        on_delete=models.CASCADE,
        related_name='events',
        null=True,
        blank=True,
        help_text="å…³è”çš„è®¢é˜…æºï¼ˆnullè¡¨ç¤ºç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹ï¼‰"
    )
    
    # åœ°ç‚¹ä¿¡æ¯
    location_name = models.CharField(max_length=200, blank=True, default="", help_text="åœ°ç‚¹åç§°")
    latitude = models.FloatField(default=0.0, help_text="çº¬åº¦ï¼ˆ0è¡¨ç¤ºæ— åœ°ç‚¹ï¼‰")
    longitude = models.FloatField(default=0.0, help_text="ç»åº¦ï¼ˆ0è¡¨ç¤ºæ— åœ°ç‚¹ï¼‰")
    
    # å…ƒæ•°æ®
    created_at = models.DateTimeField(auto_now_add=True, help_text="åˆ›å»ºæ—¶é—´")
    updated_at = models.DateTimeField(auto_now=True, help_text="æ›´æ–°æ—¶é—´")
    
    class Meta:
        db_table = 'events'
        ordering = ['start_time']
        indexes = [
            models.Index(fields=['start_time']),
            models.Index(fields=['user', 'start_time']),
            models.Index(fields=['subscription', 'start_time']),
        ]
        unique_together = [
            ('subscription', 'start_time', 'title'),  # åŒä¸€è®¢é˜…æºåŒæ—¶é—´åŒæ ‡é¢˜çš„å”¯ä¸€æ€§
        ]
    
    def __str__(self):
        return f"{self.title} - {self.start_time}"
```

**å­—æ®µè¯´æ˜**ï¼š

- **id**ï¼šä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
- **title**ï¼šæ—¥ç¨‹æ ‡é¢˜ï¼Œå¿…å¡«ï¼Œæœ€å¤§é•¿åº¦200å­—ç¬¦ã€‚
- **description**ï¼šæ—¥ç¨‹æè¿°ï¼Œå¯é€‰ã€‚
- **start_time**ï¼šå¼€å§‹æ—¶é—´ï¼Œå¿…å¡«ï¼Œä½¿ç”¨DateTimeFieldã€‚
- **end_time**ï¼šç»“æŸæ—¶é—´ï¼Œå¯é€‰ã€‚
- **reminder_minutes**ï¼šæå‰æé†’åˆ†é’Ÿæ•°ï¼Œ0è¡¨ç¤ºä¸æé†’ã€‚
- **user**ï¼šåˆ›å»ºè€…ï¼Œå¯ç©ºã€‚å¦‚æœä¸ºnullï¼Œè¡¨ç¤ºè¿™æ˜¯å…¬å¼€è®¢é˜…çš„æ—¥ç¨‹ï¼›å¦‚æœæœ‰å€¼ï¼Œè¡¨ç¤ºè¿™æ˜¯ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹ã€‚
- **subscription**ï¼šå…³è”çš„è®¢é˜…æºï¼Œå¯ç©ºã€‚å¦‚æœä¸ºnullï¼Œè¡¨ç¤ºè¿™æ˜¯ç”¨æˆ·åˆ›å»ºçš„æ—¥ç¨‹ï¼›å¦‚æœæœ‰å€¼ï¼Œè¡¨ç¤ºè¿™æ˜¯ä»è®¢é˜…æºåŒæ­¥æ¥çš„æ—¥ç¨‹ã€‚
- **location_name**ï¼šåœ°ç‚¹åç§°ã€‚
- **latitude/longitude**ï¼šç»çº¬åº¦åæ ‡ã€‚
- **created_at/updated_at**ï¼šåˆ›å»ºå’Œæ›´æ–°æ—¶é—´ï¼Œè‡ªåŠ¨ç®¡ç†ã€‚

**ç´¢å¼•è®¾è®¡**ï¼š

- **start_timeç´¢å¼•**ï¼šåŠ é€Ÿæ—¥æœŸæŸ¥è¯¢ã€‚
- **user + start_timeè”åˆç´¢å¼•**ï¼šåŠ é€Ÿç”¨æˆ·æ—¥ç¨‹æŸ¥è¯¢ã€‚
- **subscription + start_timeè”åˆç´¢å¼•**ï¼šåŠ é€Ÿè®¢é˜…æ—¥ç¨‹æŸ¥è¯¢ã€‚
- **å”¯ä¸€çº¦æŸ**ï¼šåŒä¸€è®¢é˜…æºã€åŒä¸€æ—¶é—´ã€åŒä¸€æ ‡é¢˜çš„æ—¥ç¨‹å”¯ä¸€ï¼Œé˜²æ­¢é‡å¤åŒæ­¥ã€‚

#### 4.2.2 Subscription æ¨¡å‹ï¼ˆè®¢é˜…æ¨¡å‹ï¼‰

**æ¨¡å‹å®šä¹‰**ï¼š

```python
class Subscription(models.Model):
    """
    æ—¥å†è®¢é˜…æ¨¡å‹
    
    ä»£è¡¨ä¸€ä¸ªè®¢é˜…æºï¼Œå¦‚"ä¸­å›½æ³•å®šèŠ‚å‡æ—¥"ã€"ä¸–ç•Œçºªå¿µæ—¥"ç­‰ã€‚
    """
    id = models.BigAutoField(primary_key=True)
    name = models.CharField(max_length=100, help_text="è®¢é˜…åç§°")
    slug = models.SlugField(unique=True, help_text="å”¯ä¸€æ ‡è¯†ï¼ˆURLå‹å¥½ï¼‰")
    description = models.TextField(blank=True, default="", help_text="æè¿°ä¿¡æ¯")
    
    # æ˜¾ç¤ºè®¾ç½®
    color = models.CharField(max_length=7, default="#667eea", help_text="æ˜¾ç¤ºé¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰")
    icon = models.CharField(max_length=10, default="ğŸ“…", help_text="å›¾æ ‡emoji")
    
    # è®¢é˜…è®¾ç½®
    is_public = models.BooleanField(default=True, help_text="æ˜¯å¦å…¬å¼€è®¢é˜…")
    is_active = models.BooleanField(default=True, help_text="æ˜¯å¦æ¿€æ´»ï¼ˆç®¡ç†å‘˜å¯ä»¥ç¦ç”¨ï¼‰")
    
    # ç»Ÿè®¡ä¿¡æ¯
    event_count = models.IntegerField(default=0, help_text="äº‹ä»¶æ•°é‡")
    subscriber_count = models.IntegerField(default=0, help_text="è®¢é˜…è€…æ•°é‡")
    
    # å…ƒæ•°æ®
    created_at = models.DateTimeField(auto_now_add=True, help_text="åˆ›å»ºæ—¶é—´")
    updated_at = models.DateTimeField(auto_now=True, help_text="æ›´æ–°æ—¶é—´")
    
    class Meta:
        db_table = 'subscriptions'
        ordering = ['name']
        indexes = [
            models.Index(fields=['slug']),
            models.Index(fields=['is_public', 'is_active']),
        ]
    
    def __str__(self):
        return self.name
```

**å­—æ®µè¯´æ˜**ï¼š

- **id**ï¼šä¸»é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
- **name**ï¼šè®¢é˜…åç§°ï¼Œå¦‚"ä¸­å›½æ³•å®šèŠ‚å‡æ—¥"ã€‚
- **slug**ï¼šå”¯ä¸€æ ‡è¯†ï¼ŒURLå‹å¥½ï¼Œå¦‚"china-holidays"ã€‚ç”¨äºAPIæŸ¥è¯¢ã€‚
- **description**ï¼šæè¿°ä¿¡æ¯ã€‚
- **color**ï¼šæ˜¾ç¤ºé¢œè‰²ï¼Œç”¨äºç•Œé¢åŒºåˆ†ã€‚
- **icon**ï¼šå›¾æ ‡emojiã€‚
- **is_public**ï¼šæ˜¯å¦å…¬å¼€è®¢é˜…ã€‚å…¬å¼€è®¢é˜…ä»»ä½•äººéƒ½å¯ä»¥è®¢é˜…ã€‚
- **is_active**ï¼šæ˜¯å¦æ¿€æ´»ã€‚ç®¡ç†å‘˜å¯ä»¥ç¦ç”¨æŸäº›è®¢é˜…æºã€‚
- **event_count**ï¼šäº‹ä»¶æ•°é‡ï¼Œç»Ÿè®¡è¿™ä¸ªè®¢é˜…æºæœ‰å¤šå°‘ä¸ªæ—¥ç¨‹ã€‚
- **subscriber_count**ï¼šè®¢é˜…è€…æ•°é‡ï¼Œç»Ÿè®¡æœ‰å¤šå°‘ç”¨æˆ·è®¢é˜…äº†è¿™ä¸ªæºã€‚
- **created_at/updated_at**ï¼šåˆ›å»ºå’Œæ›´æ–°æ—¶é—´ã€‚

### 4.3 æ•°æ®å…³ç³»

#### 4.3.1 Event ä¸ Subscription çš„å…³ç³»

```
Subscription (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Event
      â”‚                         â”‚
      â”‚                         â”‚
è®¢é˜…æºï¼šä¸­å›½æ³•å®šèŠ‚å‡æ—¥           å¤šä¸ªæ—¥ç¨‹ï¼šå…ƒæ—¦ã€æ˜¥èŠ‚ã€æ¸…æ˜èŠ‚...
```

**å…³ç³»è¯´æ˜**ï¼š

- ä¸€ä¸ªè®¢é˜…æºå¯ä»¥æœ‰å¤šä¸ªæ—¥ç¨‹äº‹ä»¶ï¼ˆä¸€å¯¹å¤šå…³ç³»ï¼‰ã€‚
- ä¸€ä¸ªæ—¥ç¨‹äº‹ä»¶åªèƒ½å±äºä¸€ä¸ªè®¢é˜…æºï¼ˆå¤šå¯¹ä¸€å…³ç³»ï¼‰ã€‚
- ä½¿ç”¨å¤–é”® `subscription` å…³è”ã€‚

#### 4.3.2 Event ä¸ User çš„å…³ç³»

```
User (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Event
  â”‚                   â”‚
  â”‚                   â”‚
ç”¨æˆ·ï¼šå¼ ä¸‰             å¤šä¸ªæ—¥ç¨‹ï¼šä¼šè®®ã€çº¦ä¼šã€æé†’...
```

**å…³ç³»è¯´æ˜**ï¼š

- ä¸€ä¸ªç”¨æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªæ—¥ç¨‹äº‹ä»¶ï¼ˆä¸€å¯¹å¤šå…³ç³»ï¼‰ã€‚
- ä¸€ä¸ªæ—¥ç¨‹äº‹ä»¶åªèƒ½å±äºä¸€ä¸ªç”¨æˆ·ï¼ˆå¤šå¯¹ä¸€å…³ç³»ï¼‰ã€‚
- ä½¿ç”¨å¤–é”® `user` å…³è”ã€‚

---

## 5. æ•°æ®åº“å…³ç³»å›¾

### 5.1 åç«¯ERå›¾ï¼ˆå®ä½“å…³ç³»å›¾ï¼‰

![åç«¯ERå›¾](uml/uml_images/14.åç«¯ERå›¾.png)

### 5.2 Androidç«¯ERå›¾

![Androidç«¯ERå›¾](uml/uml_images/10.å®‰å“ç«¯ERå›¾.png)

### 5.3 æ•°æ®æµå…³ç³»å›¾

![æ•°æ®æµå…³ç³»å›¾](uml/uml_images/11.æ•°æ®æµå…³ç³»å›¾.png)

### 5.4 æ•°æ®åŒæ­¥æµç¨‹å›¾

![æ•°æ®åŒæ­¥æµç¨‹å›¾](uml/uml_images/12.æ•°æ®åŒæ­¥æµç¨‹å›¾.png)

### 5.5 æ•°æ®åº“è¡¨ç»“æ„å¯¹æ¯”å›¾

![æ•°æ®åº“è¡¨ç»“æ„å¯¹æ¯”å›¾](uml/uml_images/13.æ•°æ®åº“è¡¨ç»“æ„å¯¹æ¯”å›¾.png)

---

## 6. æ•°æ®åŒæ­¥ç­–ç•¥

### 6.1 åŒæ­¥æœºåˆ¶

**æœ¬åœ°ä¼˜å…ˆç­–ç•¥**ï¼š

1. **è¯»å–æ•°æ®**ï¼šä¼˜å…ˆä»æœ¬åœ°æ•°æ®åº“è¯»å–ï¼Œä¿è¯å¿«é€Ÿå“åº”ã€‚
2. **åå°åŒæ­¥**ï¼šåœ¨åå°å¼‚æ­¥åŒæ­¥äº‘ç«¯æ•°æ®ï¼Œæ›´æ–°æœ¬åœ°æ•°æ®åº“ã€‚
3. **å†²çªè§£å†³**ï¼šä»¥äº‘ç«¯æ•°æ®ä¸ºå‡†ï¼Œæœ¬åœ°æ•°æ®ä¼šè¢«è¦†ç›–ã€‚

**åŒæ­¥æµç¨‹**ï¼š

```
ç”¨æˆ·æ“ä½œ â†’ æœ¬åœ°æ•°æ®åº“ â†’ Repository â†’ API â†’ äº‘ç«¯æ•°æ®åº“
   â†“                                         â†“
ç•Œé¢æ›´æ–°                                 åŒæ­¥å“åº”
```

### 6.2 åŒæ­¥åœºæ™¯

#### åœºæ™¯ä¸€ï¼šæ·»åŠ æ—¥ç¨‹

**æœ¬åœ°æ¨¡å¼**ï¼š
```
ç”¨æˆ·æ·»åŠ  â†’ æœ¬åœ°æ•°æ®åº“ â†’ ç•Œé¢æ›´æ–°
```

**äº‘ç«¯æ¨¡å¼**ï¼š
```
ç”¨æˆ·æ·»åŠ  â†’ æœ¬åœ°æ•°æ®åº“ â†’ APIè¯·æ±‚ â†’ äº‘ç«¯æ•°æ®åº“
           â†“                              â†“
       ç•Œé¢æ›´æ–°                      åŒæ­¥æˆåŠŸå“åº”
```

#### åœºæ™¯äºŒï¼šè®¢é˜…æ—¥å†

```
ç”¨æˆ·è®¢é˜… â†’ APIè¯·æ±‚ â†’ è·å–è®¢é˜…æºä¿¡æ¯ â†’ ä¿å­˜åˆ°æœ¬åœ°Subscriptionè¡¨
         â†“
    è·å–è®¢é˜…æ—¥ç¨‹ â†’ APIè¯·æ±‚ â†’ æ‰¹é‡è·å–æ—¥ç¨‹ â†’ ä¿å­˜åˆ°æœ¬åœ°Eventè¡¨
```

#### åœºæ™¯ä¸‰ï¼šæ•°æ®åŒæ­¥

```
åº”ç”¨å¯åŠ¨ â†’ æ£€æŸ¥æœ€ååŒæ­¥æ—¶é—´ â†’ è°ƒç”¨APIåŒæ­¥ â†’ æ›´æ–°æœ¬åœ°æ•°æ®
```

### 6.3 æ•°æ®è½¬æ¢

**Androidç«¯ä¸åç«¯çš„å­—æ®µæ˜ å°„**ï¼š

| Androidå­—æ®µ | åç«¯å­—æ®µ | è½¬æ¢è¯´æ˜ |
|-------------|----------|----------|
| dateTime (Long) | start_time (DateTime) | æ—¶é—´æˆ³ â†” æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸² |
| subscriptionId | subscription_id | IDç›´æ¥æ˜ å°„ |
| id | id | ä¸»é”®ç›´æ¥æ˜ å°„ |

**è½¬æ¢ä»£ç ç¤ºä¾‹**ï¼š

```kotlin
// Androidç«¯ï¼šEvent â†’ åç«¯EventRequest
fun Event.toEventRequest(): EventRequest {
    return EventRequest(
        title = this.title,
        description = this.description,
        start_time = Date(this.dateTime).toISOString(),
        reminder_minutes = this.reminderMinutes,
        location_name = this.locationName,
        latitude = this.latitude,
        longitude = this.longitude
    )
}

// åç«¯EventResponse â†’ Androidç«¯Event
fun EventResponse.toEvent(): Event {
    return Event(
        id = this.id,
        title = this.title,
        description = this.description,
        dateTime = Date.parse(this.start_time).time,
        reminderMinutes = this.reminder_minutes,
        subscriptionId = this.subscription_id,
        locationName = this.location_name ?: "",
        latitude = this.latitude ?: 0.0,
        longitude = this.longitude ?: 0.0
    )
}
```

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 ç´¢å¼•ä¼˜åŒ–

**Androidç«¯ç´¢å¼•**ï¼š

- **Event.dateTimeç´¢å¼•**ï¼šåŠ é€Ÿæ—¥æœŸæŸ¥è¯¢ï¼Œç”¨äºè·å–æŸä¸€å¤©çš„æ—¥ç¨‹ã€‚
- **Event.subscriptionIdç´¢å¼•**ï¼šåŠ é€Ÿè®¢é˜…æ—¥ç¨‹æŸ¥è¯¢ï¼Œç”¨äºè·å–æŸä¸ªè®¢é˜…æºçš„æ‰€æœ‰æ—¥ç¨‹ã€‚

**åç«¯ç´¢å¼•**ï¼š

- **Event.start_timeç´¢å¼•**ï¼šåŠ é€Ÿæ—¥æœŸèŒƒå›´æŸ¥è¯¢ã€‚
- **Event.user + start_timeè”åˆç´¢å¼•**ï¼šåŠ é€Ÿç”¨æˆ·æ—¥ç¨‹æŸ¥è¯¢ã€‚
- **Event.subscription + start_timeè”åˆç´¢å¼•**ï¼šåŠ é€Ÿè®¢é˜…æ—¥ç¨‹æŸ¥è¯¢ã€‚

### 7.2 æŸ¥è¯¢ä¼˜åŒ–

**åˆ†é¡µæŸ¥è¯¢**ï¼š

```kotlin
// Androidç«¯ï¼šåˆ†é¡µæŸ¥è¯¢æ—¥ç¨‹
@Query("SELECT * FROM events ORDER BY dateTime ASC LIMIT :limit OFFSET :offset")
suspend fun getEventsPaged(limit: Int, offset: Int): List<Event>
```

**æ‰¹é‡æ“ä½œ**ï¼š

```kotlin
// Androidç«¯ï¼šæ‰¹é‡æ’å…¥æ—¥ç¨‹ï¼ˆè®¢é˜…åŒæ­¥æ—¶ä½¿ç”¨ï¼‰
@Insert
suspend fun insertAll(events: List<Event>)
```

### 7.3 æ•°æ®ç¼“å­˜

**å†…å­˜ç¼“å­˜**ï¼š

```kotlin
// ç¼“å­˜å½“å‰æœˆä»½çš„æ—¥ç¨‹æ•°æ®
private var cachedEvents: Map<Long, List<Event>> = emptyMap()

fun getEventsForDate(date: Long): List<Event> {
    // å…ˆæ£€æŸ¥ç¼“å­˜
    if (cachedEvents.containsKey(date)) {
        return cachedEvents[date]!!
    }
    
    // ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“
    val events = eventDao.getEventsForDate(date)
    cachedEvents = cachedEvents + (date to events)
    return events
}
```

---

## 8. æ•°æ®è¿ç§»æ–¹æ¡ˆ

### 8.1 æ•°æ®åº“ç‰ˆæœ¬å‡çº§

**Room Migration**ï¼š

```kotlin
val MIGRATION_1_2 = object : Migration(1, 2) {
    override fun migrate(database: SupportSQLiteDatabase) {
        database.execSQL("ALTER TABLE events ADD COLUMN locationName TEXT NOT NULL DEFAULT ''")
        database.execSQL("ALTER TABLE events ADD COLUMN latitude REAL NOT NULL DEFAULT 0.0")
        database.execSQL("ALTER TABLE events ADD COLUMN longitude REAL NOT NULL DEFAULT 0.0")
    }
}

val MIGRATION_2_3 = object : Migration(2, 3) {
    override fun migrate(database: SupportSQLiteDatabase) {
        database.execSQL("CREATE INDEX idx_events_dateTime ON events(dateTime)")
        database.execSQL("CREATE INDEX idx_events_subscriptionId ON events(subscriptionId)")
    }
}

@Database(
    entities = [Event::class, Subscription::class], 
    version = 3, 
    exportSchema = false
)
abstract class AppDatabase : RoomDatabase() {
    // ...
    
    companion object {
        fun getDatabase(context: Context): AppDatabase {
            return Room.databaseBuilder(
                context.applicationContext,
                AppDatabase::class.java,
                "calendar_database"
            )
                .addMigrations(MIGRATION_1_2, MIGRATION_2_3)
                .build()
        }
    }
}
```

### 8.2 æ•°æ®è¿ç§»ç­–ç•¥

**å¼€å‘é˜¶æ®µ**ï¼š

- ä½¿ç”¨ `fallbackToDestructiveMigration()`ï¼Œå…è®¸ç ´åæ€§è¿ç§»ï¼ˆæ¸…ç©ºæ•°æ®åº“é‡å»ºï¼‰ã€‚

**ç”Ÿäº§é˜¶æ®µ**ï¼š

- ä½¿ç”¨ `addMigrations()`ï¼Œé€æ­¥è¿ç§»ï¼Œä¿ç•™ç”¨æˆ·æ•°æ®ã€‚
- æµ‹è¯•è¿ç§»è„šæœ¬ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ã€‚

---

## 9. æ€»ç»“

### 9.1 æ•°æ®åº“è®¾è®¡ç‰¹ç‚¹

- âœ… **æœ¬åœ°ä¼˜å…ˆ**ï¼šAndroidç«¯ä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ•°æ®ï¼Œç¦»çº¿ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ã€‚
- âœ… **äº‘ç«¯åŒæ­¥**ï¼šæ”¯æŒäº‘ç«¯æ¨¡å¼ï¼Œæ•°æ®å¯è·¨è®¾å¤‡åŒæ­¥ã€‚
- âœ… **ç»“æ„æ¸…æ™°**ï¼šè¡¨ç»“æ„ç®€å•æ˜äº†ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†ä½¿ç”¨ç´¢å¼•ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚
- âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šé€šè¿‡ç‰ˆæœ¬æ§åˆ¶å’ŒåŒæ­¥æœºåˆ¶ä¿è¯æ•°æ®ä¸€è‡´ã€‚

### 9.2 æœªæ¥ä¼˜åŒ–æ–¹å‘

- ğŸ”„ **å¢é‡åŒæ­¥**ï¼šåªåŒæ­¥å˜æ›´çš„æ•°æ®ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“ã€‚
- ğŸ”„ **å†²çªè§£å†³**ï¼šå®ç°æ›´æ™ºèƒ½çš„å†²çªè§£å†³æœºåˆ¶ã€‚
- ğŸ”„ **æ•°æ®å‹ç¼©**ï¼šå¯¹å¤§é‡å†å²æ•°æ®è¿›è¡Œå‹ç¼©å­˜å‚¨ã€‚
- ğŸ”„ **å¤‡ä»½æ¢å¤**ï¼šå®ç°è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2025å¹´11æœˆ  
**ç»´æŠ¤è€…**ï¼šRalendar æ ¸å¿ƒå›¢é˜Ÿ

